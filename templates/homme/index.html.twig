{% extends 'base.html.twig' %}

{% block title %}Mes projets {% endblock %}

{% block body %}


     {% if is_granted('ROLE_ADMIN') %}
<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
  <ul class="navbar-nav">
    <li class="nav-item active">
      <a class="nav-link" href="{{path('homme')}}">Home</a>
    </li>
     {% for men in menu %}
      <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle"  href="#" id="navbardrop" data-toggle="dropdown">{{men.menlib}} </a>
       <div class="dropdown-menu">
            {%for ssmen in men.getSsmenusChildren(men.id) %}
                  {%for ch in ssmen.getOngChildren1(men.id) %}
                         <a class="dropdown-item" href="?ong={{ch.id~"&type="~ch.ongphp~"&men="~men.id~"&ssmen="~ssmen.id}}">{{(ssmen.ssmlib)}}</a>
                  {%endfor%}
            {% endfor %}
      </div>
    </li>   
     {% endfor %}
      <li class="nav-item">
        <a class="nav-link" href="{{path('sonata_admin_dashboard')}}">Admin</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{path('api_entrypoint')}}">Api</a>
      </li>
          <li class="nav-item">
        <a class="nav-link" href="{{path('gestion_schema')}}">Génération de Champs</a>
      </li>


    </ul>

</nav>
    {% endif %}
  <p class="bg-success">Compte: {{ app.user.username }}</p>
  


 {% for mes in app.user.getMessages()%}
 <div class="alert alert-success alert-dismissible">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  <strong>{{mes.message}}</strong>
</div>
 
 {% endfor %}
<script>
localStorage.setItem("username", "{{  app.user.username }}" );
localStorage.setItem("url", "{{ app.request.getSchemeAndHttpHost() }}" );
localStorage.setItem("role", "{{app.user.roles[0]}}" );
</script>

 <div id="root"  user="{{  app.user.username }}" baseurl="{{ app.request.getSchemeAndHttpHost() }}" role={{app.user.roles[0]}}></div>
 


{% endblock %}
{% block javascripts %}
     {{ encore_entry_script_tags('app') }}
{% endblock %}